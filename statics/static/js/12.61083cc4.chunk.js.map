{"version":3,"sources":["../node_modules/@material-ui/icons/esm/MenuBook.js","component/Share/ReadMe.js"],"names":["createSvgIcon","d","useStyles","makeStyles","theme","readMeContainer","marginTop","breakpoints","down","spacing","readMeHeader","padding","display","color","palette","text","secondary","readMeIcon","marginRight","content","border","height","borderTopLeftRadius","borderTopRightRadius","backgroundColor","background","paper","primary","default","type","ReadMe","props","classes","useTheme","useState","loading","setLoading","setContent","dispatch","useDispatch","ToggleSnackbar","useCallback","vertical","horizontal","msg","toggleSnackbar","$vm","React","createRef","useEffect","previewPath","file","path","name","API","get","share","key","encodeURIComponent","then","response","rawData","toString","catch","error","message","Paper","className","MenuBook","Typography","Divider","TextLoading","ref","style","boxShadow","borderRadius","value","onChange","preview","toolbar"],"mappings":"oMAEe,SAAAA,EAAA,GAA4B,gBAAoB,WAAgB,KAAmB,gBAAoB,OAAQ,CAC5HC,EAAG,0YACY,gBAAoB,OAAQ,CAC3CA,EAAG,2VACA,Y,mHCML,IAAMC,EAAYC,aAAW,SAACC,GAAD,MAAY,CACrCC,gBAAgB,aACZC,UAAW,IACVF,EAAMG,YAAYC,KAAK,MAAQ,CAC5BF,UAAWF,EAAMK,QAAQ,KAGjCC,aAAc,CACVC,QAAS,YACTC,QAAS,OACTC,MAAOT,EAAMU,QAAQC,KAAKC,WAE9BC,WAAY,CACRC,YAAa,GAEjBC,QAAS,GACT,UAAW,CAEP,iBAAkB,CACdC,OAAQ,kBAEZ,8CAA+C,CAC3CC,OAAQ,eAEZ,mCAAoC,CAChCC,oBAAqB,cACrBC,qBAAsB,eAE1B,qDAAsD,CAClDC,gBAAiBpB,EAAMU,QAAQW,WAAWC,MAAQ,aAClDb,MAAOT,EAAMU,QAAQC,KAAKY,QAAU,cAExC,2CAA4C,CACxCH,gBAAiBpB,EAAMU,QAAQW,WAAWG,QAAU,aACpDf,MAC2B,SAAvBT,EAAMU,QAAQe,KACR,kBACA,kCAGd,4CAA6C,CACzCL,gBAAiBpB,EAAMU,QAAQW,WAAWG,QAAU,cAExD,yCAA0C,CACtCf,MAC2B,SAAvBT,EAAMU,QAAQe,KACR,qBACA,sBAEd,gDAAiD,CAC7CL,gBAAiBpB,EAAMU,QAAQW,WAAWG,QAAU,mBAKjD,SAASE,EAAOC,GAC3B,IAAMC,EAAU9B,IACVE,EAAQ6B,cAEd,EAA8BC,oBAAS,GAAvC,mBAAOC,EAAP,KAAgBC,EAAhB,KACA,EAA8BF,mBAAS,IAAvC,mBAAOf,EAAP,KAAgBkB,EAAhB,KAEMC,EAAWC,cACXC,EAAiBC,uBACnB,SAACC,EAAUC,EAAYC,EAAK/B,GAA5B,OACIyB,EAASO,YAAeH,EAAUC,EAAYC,EAAK/B,MACvD,CAACyB,IAGCQ,EAAMC,IAAMC,YA+BlB,OA7BAC,qBAAU,WACNb,GAAW,GACX,IAAMc,EACkB,MAApBnB,EAAMoB,KAAKC,KACLrB,EAAMoB,KAAKC,KAAOrB,EAAMoB,KAAKE,KAC7BtB,EAAMoB,KAAKC,KAAO,IAAMrB,EAAMoB,KAAKE,KAC7CC,IAAIC,IACA,iBACIxB,EAAMyB,MAAMC,IACZ,SACAC,mBAAmBR,IAEtBS,MAAK,SAACC,GACHvB,EAAWuB,EAASC,QAAQC,eAE/BC,OAAM,SAACC,GACJxB,EACI,MACA,QACA,qDAAoBwB,EAAMC,QAC1B,YAGPN,MAAK,WACFvB,GAAW,QAGpB,CAACL,EAAMyB,MAAOzB,EAAMoB,OAGnB,kBAACe,EAAA,EAAD,CAAOC,UAAWnC,EAAQ3B,iBACtB,yBAAK8D,UAAWnC,EAAQtB,cACpB,kBAAC0D,EAAD,CAAUD,UAAWnC,EAAQf,aAC7B,kBAACoD,EAAA,EAAD,KAAatC,EAAMoB,KAAKE,OAG5B,kBAACiB,EAAA,EAAD,MACA,yBAAKH,UAAWnC,EAAQb,SACnBgB,GAAW,kBAACoC,EAAA,EAAD,OACVpC,GACE,kBAAC,IAAD,CACIqC,IAAK1B,EACL2B,MAAO,CACHC,UAAW,OACXC,aAAc,EACdnD,gBAAiBpB,EAAMU,QAAQW,WAAWC,OAE9CL,OAAQ,OACRuD,MAAOzD,EACP0D,SAAU,SAACD,GAAD,OAAWvC,EAAWuC,IAChCE,SAAO,EACPC,QAAS","file":"static/js/12.61083cc4.chunk.js","sourcesContent":["import * as React from 'react';\nimport createSvgIcon from './utils/createSvgIcon';\nexport default createSvgIcon( /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M21 5c-1.11-.35-2.33-.5-3.5-.5-1.95 0-4.05.4-5.5 1.5-1.45-1.1-3.55-1.5-5.5-1.5S2.45 4.9 1 6v14.65c0 .25.25.5.5.5.1 0 .15-.05.25-.05C3.1 20.45 5.05 20 6.5 20c1.95 0 4.05.4 5.5 1.5 1.35-.85 3.8-1.5 5.5-1.5 1.65 0 3.35.3 4.75 1.05.1.05.15.05.25.05.25 0 .5-.25.5-.5V6c-.6-.45-1.25-.75-2-1zm0 13.5c-1.1-.35-2.3-.5-3.5-.5-1.7 0-4.15.65-5.5 1.5V8c1.35-.85 3.8-1.5 5.5-1.5 1.2 0 2.4.15 3.5.5v11.5z\"\n}), /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M17.5 10.5c.88 0 1.73.09 2.5.26V9.24c-.79-.15-1.64-.24-2.5-.24-1.7 0-3.24.29-4.5.83v1.66c1.13-.64 2.7-.99 4.5-.99zM13 12.49v1.66c1.13-.64 2.7-.99 4.5-.99.88 0 1.73.09 2.5.26V11.9c-.79-.15-1.64-.24-2.5-.24-1.7 0-3.24.3-4.5.83zM17.5 14.33c-1.7 0-3.24.29-4.5.83v1.66c1.13-.64 2.7-.99 4.5-.99.88 0 1.73.09 2.5.26v-1.52c-.79-.16-1.64-.24-2.5-.24z\"\n})), 'MenuBook');","import React, { useCallback, useEffect, useState } from \"react\";\nimport { makeStyles, useTheme } from \"@material-ui/core/styles\";\nimport { MenuBook } from \"@material-ui/icons\";\nimport { Typography } from \"@material-ui/core\";\nimport Divider from \"@material-ui/core/Divider\";\nimport Paper from \"@material-ui/core/Paper\";\nimport TextLoading from \"../Placeholder/TextLoading\";\nimport API from \"../../middleware/Api\";\nimport { useDispatch } from \"react-redux\";\nimport Editor from \"for-editor\";\nimport { toggleSnackbar } from \"../../redux/explorer\";\n\nconst useStyles = makeStyles((theme) => ({\n    readMeContainer: {\n        marginTop: 30,\n        [theme.breakpoints.down(\"sm\")]: {\n            marginTop: theme.spacing(2),\n        },\n    },\n    readMeHeader: {\n        padding: \"10px 16px\",\n        display: \"flex\",\n        color: theme.palette.text.secondary,\n    },\n    readMeIcon: {\n        marginRight: 8,\n    },\n    content: {},\n    \"@global\": {\n        //如果嵌套主题，则应该定位[class * =“MuiButton-root”]。\n        \".for-container\": {\n            border: \"none!important\",\n        },\n        \".for-container .for-editor .for-editor-edit\": {\n            height: \"0!important\",\n        },\n        \".for-container > div:first-child\": {\n            borderTopLeftRadius: \"0!important\",\n            borderTopRightRadius: \"0!important\",\n        },\n        \".for-container .for-editor .for-panel .for-preview\": {\n            backgroundColor: theme.palette.background.paper + \"!important\",\n            color: theme.palette.text.primary + \"!important\",\n        },\n        \".for-container .for-markdown-preview pre\": {\n            backgroundColor: theme.palette.background.default + \"!important\",\n            color:\n                theme.palette.type === \"dark\"\n                    ? \"#fff !important\"\n                    : \"rgba(0, 0, 0, 0.87);!important\",\n        },\n\n        \".for-container .for-markdown-preview code\": {\n            backgroundColor: theme.palette.background.default + \"!important\",\n        },\n        \".for-container .for-markdown-preview a\": {\n            color:\n                theme.palette.type === \"dark\"\n                    ? \"#67aeff !important\"\n                    : \"#0366d6 !important\",\n        },\n        \".for-container .for-markdown-preview table th\": {\n            backgroundColor: theme.palette.background.default + \"!important\",\n        },\n    },\n}));\n\nexport default function ReadMe(props) {\n    const classes = useStyles();\n    const theme = useTheme();\n\n    const [loading, setLoading] = useState(true);\n    const [content, setContent] = useState(\"\");\n\n    const dispatch = useDispatch();\n    const ToggleSnackbar = useCallback(\n        (vertical, horizontal, msg, color) =>\n            dispatch(toggleSnackbar(vertical, horizontal, msg, color)),\n        [dispatch]\n    );\n\n    const $vm = React.createRef();\n\n    useEffect(() => {\n        setLoading(true);\n        const previewPath =\n            props.file.path === \"/\"\n                ? props.file.path + props.file.name\n                : props.file.path + \"/\" + props.file.name;\n        API.get(\n            \"/share/readme/\" +\n                props.share.key +\n                \"?path=\" +\n                encodeURIComponent(previewPath)\n        )\n            .then((response) => {\n                setContent(response.rawData.toString());\n            })\n            .catch((error) => {\n                ToggleSnackbar(\n                    \"top\",\n                    \"right\",\n                    \"无法读取 README 内容，\" + error.message,\n                    \"error\"\n                );\n            })\n            .then(() => {\n                setLoading(false);\n            });\n        // eslint-disable-next-line\n    }, [props.share, props.file]);\n\n    return (\n        <Paper className={classes.readMeContainer}>\n            <div className={classes.readMeHeader}>\n                <MenuBook className={classes.readMeIcon} />\n                <Typography>{props.file.name}</Typography>\n            </div>\n\n            <Divider />\n            <div className={classes.content}>\n                {loading && <TextLoading />}\n                {!loading && (\n                    <Editor\n                        ref={$vm}\n                        style={{\n                            boxShadow: \"none\",\n                            borderRadius: 4,\n                            backgroundColor: theme.palette.background.paper,\n                        }}\n                        height={\"100%\"}\n                        value={content}\n                        onChange={(value) => setContent(value)}\n                        preview\n                        toolbar={{}}\n                    />\n                )}\n            </div>\n        </Paper>\n    );\n}\n"],"sourceRoot":""}